<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tidemark</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="app">
    <!-- Header with platform theme -->
    <div id="header">
      <h1 id="title">Tidemark</h1>
      <div id="platform-indicator"></div>
    </div>

    <!-- Error message area -->
    <div id="error-message" class="error hidden"></div>

    <!-- Video info section -->
    <div id="video-info" class="hidden">
      <div id="video-title"></div>
      <div id="video-time"></div>
    </div>

    <!-- Record form -->
    <div id="record-form">
      <input
        type="text"
        id="topic-input"
        placeholder=""
        maxlength="100"
      />
      <button id="record-button" class="primary"></button>
    </div>

    <!-- Two-panel layout: Folders + Records -->
    <div id="main-container">
      <!-- Left sidebar: Folders -->
      <div id="folders-sidebar">
        <div id="folders-header">
          <h2></h2>
        </div>
        <div id="folder-create">
          <input
            type="text"
            id="folder-input"
            placeholder=""
            maxlength="50"
          />
          <button id="folder-add-button" title="">+</button>
        </div>
        <div id="folders-list"></div>
      </div>

      <!-- Right panel: Records -->
      <div id="records-section">
        <div id="records-header">
          <h2></h2>
          <div id="record-count"></div>
        </div>
        <div id="records-list"></div>
        <div id="no-records" class="empty-state hidden"></div>
      </div>
    </div>

    <!-- Settings section (collapsed by default) -->
    <div id="settings-section">
      <button id="settings-toggle" class="settings-toggle"></button>
      <div id="settings-content" class="settings-content hidden">
        <!-- Cloud Sync Settings -->
        <div class="settings-group">
          <h3></h3>

          <div id="sync-status-display" class="settings-item">
            <div class="sync-status">
              <span id="sync-status-icon">âšª</span>
              <span id="sync-status-text"></span>
            </div>
          </div>

          <div id="sync-logged-out" class="settings-item">
            <button id="login-button" class="primary"></button>
            <p class="settings-description"></p>
            <details class="test-mode">
              <summary style="cursor: pointer; color: #999; font-size: 12px; margin-top: 8px;"></summary>
              <div style="margin-top: 8px;">
                <input
                  type="text"
                  id="test-jwt-input"
                  placeholder=""
                  style="width: 100%; padding: 6px; font-size: 12px; font-family: monospace;"
                />
                <button id="test-jwt-button" class="secondary" style="margin-top: 4px; font-size: 12px;"></button>
              </div>
            </details>
          </div>

          <div id="sync-logged-in" class="settings-item hidden">
            <p class="settings-description">
              <strong id="user-email"></strong>
            </p>
            <button id="logout-button" class="secondary"></button>
          </div>
        </div>

        <div class="settings-group">
          <h3></h3>

          <div class="settings-item">
            <button id="export-button" class="secondary"></button>
            <p class="settings-description"></p>
          </div>

          <div class="settings-item">
            <button id="import-button" class="secondary"></button>
            <input
              type="file"
              id="import-file-input"
              accept=".json,application/json"
              style="display: none;"
            />
            <p class="settings-description"></p>
          </div>
        </div>

        <!-- Language selector will be appended here by popup.ts -->
      </div>
    </div>

    <!-- Import mode selection modal -->
    <div id="import-modal" class="modal hidden">
      <div class="modal-content">
        <h3></h3>
        <p class="modal-description">
          <span id="import-stats"></span>
        </p>
        <div class="modal-buttons">
          <button id="import-merge-button" class="primary"></button>
          <button id="import-overwrite-button" class="secondary"></button>
          <button id="import-cancel-button" class="tertiary"></button>
        </div>
        <div class="modal-help">
          <p><strong></strong></p>
          <p><strong></strong></p>
        </div>
      </div>
    </div>
  </div>

  <script src="popup/popup.js" type="module"></script>
</body>
</html>
